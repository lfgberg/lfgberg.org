<script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous" async></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<div class="row" data-masonry='{"percentPosition": true }'>
    {{ $dir := string (.Get "gallery_dir") }}
    {{- $images := .Resources.ByType "image" -}}
    {{ range (readDir (print "/assets/" $dir)) }}
        {{- $image := resources.Get (printf "%s/%s" $dir .Name) -}}
        {{- $imagetitle := index (split .Name ".") 0 -}}
        <div class="col-6 col-md-4 col-xl-3 pb-3 px-2">
            <img src="{{ $image.Permalink }}" height="{{ .Height }}" width="{{ .Width }}" class="img-fluid" alt="{{ $imagetitle }}">
        </div>
    {{ end }}
</div>